<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Интерактивная карта Minecraft сервера</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 2px solid #3949ab;
            margin-bottom: 30px;
            background: rgba(25, 25, 50, 0.7);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            color: #4fc3f7;
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.3);
        }
        
        .subtitle {
            color: #81d4fa;
            font-size: 1.2rem;
            margin-bottom: 15px;
        }
        
        .seed-info {
            background: rgba(30, 30, 60, 0.8);
            padding: 12px 20px;
            border-radius: 10px;
            display: inline-block;
            font-family: monospace;
            font-size: 1.1rem;
            color: #69f0ae;
            border: 1px solid #3949ab;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .map-container {
            flex: 1;
            min-width: 300px;
            background: rgba(25, 25, 50, 0.7);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 1px solid #3949ab;
        }
        
        #map {
            height: 600px;
            width: 100%;
            z-index: 1;
        }
        
        .controls {
            padding: 20px;
            background: rgba(30, 30, 60, 0.8);
            border-top: 1px solid #3949ab;
        }
        
        .controls h3 {
            color: #4fc3f7;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .controls h3 i {
            font-size: 1.3rem;
        }
        
        .control-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .btn {
            padding: 10px 20px;
            background: linear-gradient(to right, #3949ab, #5c6bc0);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            background: linear-gradient(to right, #303f9f, #3949ab);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(57, 73, 171, 0.4);
        }
        
        .btn i {
            font-size: 1.1rem;
        }
        
        .sidebar {
            width: 350px;
            min-width: 300px;
            background: rgba(25, 25, 50, 0.7);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 1px solid #3949ab;
        }
        
        .points-list {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .points-list h3 {
            color: #4fc3f7;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #3949ab;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .point-item {
            background: rgba(30, 30, 60, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #4fc3f7;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .point-item:hover {
            transform: translateX(5px);
            background: rgba(40, 40, 80, 0.9);
            border-left-color: #69f0ae;
        }
        
        .point-item h4 {
            color: #81d4fa;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .point-item p {
            color: #b0bec5;
            font-size: 0.95rem;
            line-height: 1.4;
            margin-bottom: 5px;
        }
        
        .coordinates {
            font-family: monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
            color: #69f0ae;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            border-top: 1px solid #3949ab;
            color: #81d4fa;
            font-size: 0.9rem;
        }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #3949ab;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        
        /* Стили для полосы прокрутки */
        .points-list::-webkit-scrollbar {
            width: 8px;
        }
        
        .points-list::-webkit-scrollbar-track {
            background: rgba(30, 30, 60, 0.5);
            border-radius: 10px;
        }
        
        .points-list::-webkit-scrollbar-thumb {
            background: #3949ab;
            border-radius: 10px;
        }
        
        .points-list::-webkit-scrollbar-thumb:hover {
            background: #5c6bc0;
        }
        
        /* Адаптивность */
        @media (max-width: 1100px) {
            .content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .map-container {
                width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            #map {
                height: 450px;
            }
            
            .control-buttons {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-map-marked-alt"></i> Карта Minecraft сервера</h1>
            <p class="subtitle">Интерактивная карта с ключевыми точками мира</p>
            <div class="seed-info">
                <i class="fas fa-seedling"></i> Сид мира: 5215507659080688903
            </div>
        </header>
        
        <div class="content">
            <div class="map-container">
                <div id="map"></div>
                <div class="controls">
                    <h3><i class="fas fa-gamepad"></i> Управление картой</h3>
                    <div class="control-buttons">
                        <button class="btn" id="resetView">
                            <i class="fas fa-home"></i> Центрировать карту
                        </button>
                        <button class="btn" id="showAllPoints">
                            <i class="fas fa-layer-group"></i> Показать все метки
                        </button>
                        <button class="btn" id="toggleMarkers">
                            <i class="fas fa-map-pin"></i> Скрыть/показать метки
                        </button>
                        <button class="btn" id="fullscreenBtn">
                            <i class="fas fa-expand"></i> Полный экран
                        </button>
                    </div>
                    
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #4fc3f7;"></div>
                            <span>Основные точки</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #69f0ae;"></div>
                            <span>Природные объекты</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #ffb74d;"></div>
                            <span>Постройки игроков</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #f06292;"></div>
                            <span>Опасные зоны</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="sidebar">
                <div class="points-list">
                    <h3><i class="fas fa-map-marker-alt"></i> Ключевые точки мира</h3>
                    
                    <div class="point-item" data-point-id="spawn">
                        <h4><i class="fas fa-flag"></i> Главный спавн</h4>
                        <p>Центральная точка появления игроков. Здесь расположены информационные стенды и начальные ресурсы.</p>
                        <div class="coordinates">Координаты: X: 0, Z: 0</div>
                    </div>
                    
                    <div class="point-item" data-point-id="village1">
                        <h4><i class="fas fa-home"></i> Деревня у озера</h4>
                        <p>Большая деревня с кузнецом, библиотекой и фермой. Расположена рядом с живописным озером.</p>
                        <div class="coordinates">Координаты: X: 120, Z: -85</div>
                    </div>
                    
                    <div class="point-item" data-point-id="portal">
                        <h4><i class="fas fa-fire"></i> Крепость в Нижнем мире</h4>
                        <p>Портал в Нижний мир ведет прямо к крепости. Осторожно, много лавы и мобов!</p>
                        <div class="coordinates">Координаты: X: 45, Z: 210</div>
                    </div>
                    
                    <div class="point-item" data-point-id="mine">
                        <h4><i class="fas fa-mountain"></i> Алмазная шахта</h4>
                        <p>Общественная шахта с разветвленными туннелями. На глубине 12 найден алмазный жилы.</p>
                        <div class="coordinates">Координаты: X: -150, Z: 75</div>
                    </div>
                    
                    <div class="point-item" data-point-id="castle">
                        <h4><i class="fas fa-chess-rook"></i> Заброшенный замок</h4>
                        <p>Готический замок на вершине горы. Имеет подземелья и секретные комнаты.</p>
                        <div class="coordinates">Координаты: X: 320, Z: -200</div>
                    </div>
                    
                    <div class="point-item" data-point-id="endportal">
                        <h4><i class="fas fa-eye"></i> Портал в Энд</h4>
                        <p>Активированный портал в Энд. Охраняется истребителями. Подготовьтесь перед входом!</p>
                        <div class="coordinates">Координаты: X: -80, Z: 300</div>
                    </div>
                    
                    <div class="point-item" data-point-id="farm">
                        <h4><i class="fas fa-wheat-alt"></i> Авто-ферма</h4>
                        <p>Автоматическая ферма пшеницы и моркови. Отличный источник еды.</p>
                        <div class="coordinates">Координаты: X: 90, Z: 40</div>
                    </div>
                    
                    <div class="point-item" data-point-id="netherfortress">
                        <h4><i class="fas fa-dungeon"></i> Крепость в аду</h4>
                        <p>Большая крепость с искателями и лавой. Источник слизневых шаров.</p>
                        <div class="coordinates">Координаты: X: 250, Z: 150 (Нижний мир)</div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Интерактивная карта сервера Minecraft | Сид: 5215507659080688903 | Карта обновляется ежедневно</p>
            <p>Используйте колесико мыши для приближения/отдаления. Кликните по метке для подробной информации.</p>
        </footer>
    </div>

    <script>
        // Инициализация карты
        const map = L.map('map').setView([0, 0], 3);
        
        // Добавляем слой карты (используем стилизованную темную карту)
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '© OpenStreetMap, © CartoDB',
            maxZoom: 18,
            minZoom: 1,
            noWrap: true
        }).addTo(map);
        
        // Создаем пользовательские иконки для меток
        const iconColors = {
            default: '#4fc3f7',
            nature: '#69f0ae',
            player: '#ffb74d',
            danger: '#f06292'
        };
        
        function createCustomIcon(color) {
            return L.divIcon({
                className: 'custom-marker',
                html: `<div style="
                    background-color: ${color};
                    width: 24px;
                    height: 24px;
                    border-radius: 50%;
                    border: 3px solid white;
                    box-shadow: 0 0 10px rgba(0,0,0,0.5);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-weight: bold;
                "></div>`,
                iconSize: [30, 30],
                iconAnchor: [15, 15]
            });
        }
        
        // Массив ключевых точек с координатами и информацией
        const keyPoints = [
            {
                id: 'spawn',
                name: 'Главный спавн',
                coordinates: [0, 0],
                description: 'Центральная точка появления игроков. Здесь расположены информационные стенды и начальные ресурсы.',
                type: 'default',
                icon: 'flag'
            },
            {
                id: 'village1',
                name: 'Деревня у озера',
                coordinates: [120, -85],
                description: 'Большая деревня с кузнецом, библиотекой и фермой. Расположена рядом с живописным озером.',
                type: 'nature',
                icon: 'home'
            },
            {
                id: 'portal',
                name: 'Крепость в Нижнем мире',
                coordinates: [45, 210],
                description: 'Портал в Нижний мир ведет прямо к крепости. Осторожно, много лавы и мобов!',
                type: 'danger',
                icon: 'fire'
            },
            {
                id: 'mine',
                name: 'Алмазная шахта',
                coordinates: [-150, 75],
                description: 'Общественная шахта с разветвленными туннелями. На глубине 12 найден алмазный жилы.',
                type: 'player',
                icon: 'mountain'
            },
            {
                id: 'castle',
                name: 'Заброшенный замок',
                coordinates: [320, -200],
                description: 'Готический замок на вершине горы. Имеет подземелья и секретные комнаты.',
                type: 'default',
                icon: 'chess-rook'
            },
            {
                id: 'endportal',
                name: 'Портал в Энд',
                coordinates: [-80, 300],
                description: 'Активированный портал в Энд. Охраняется истребителями. Подготовьтесь перед входом!',
                type: 'danger',
                icon: 'eye'
            },
            {
                id: 'farm',
                name: 'Авто-ферма',
                coordinates: [90, 40],
                description: 'Автоматическая ферма пшеницы и моркови. Отличный источник еды.',
                type: 'player',
                icon: 'wheat-alt'
            },
            {
                id: 'netherfortress',
                name: 'Крепость в аду',
                coordinates: [250, 150],
                description: 'Большая крепость с искателями и лавой. Источник слизневых шаров.',
                type: 'danger',
                icon: 'dungeon'
            }
        ];
        
        // Группа для всех маркеров
        const markers = L.layerGroup().addTo(map);
        
        // Добавляем все метки на карту
        keyPoints.forEach(point => {
            const color = iconColors[point.type] || iconColors.default;
            const marker = L.marker(point.coordinates, {
                icon: createCustomIcon(color),
                title: point.name
            }).addTo(markers);
            
            // Всплывающее окно с информацией
            marker.bindPopup(`
                <div style="max-width: 250px;">
                    <h3 style="margin: 0 0 10px 0; color: ${color}">
                        <i class="fas fa-${point.icon}"></i> ${point.name}
                    </h3>
                    <p style="margin: 0 0 10px 0;">${point.description}</p>
                    <div style="background: #f0f0f0; padding: 8px; border-radius: 5px; font-family: monospace; color: #333;">
                        X: ${point.coordinates[0]}, Z: ${point.coordinates[1]}
                    </div>
                </div>
            `);
            
            // Привязываем маркер к элементу списка
            marker.pointId = point.id;
        });
        
        // Функции управления
        document.getElementById('resetView').addEventListener('click', function() {
            map.setView([0, 0], 3);
        });
        
        document.getElementById('showAllPoints').addEventListener('click', function() {
            const group = new L.featureGroup();
            markers.eachLayer(function(layer) {
                group.addLayer(layer);
            });
            map.fitBounds(group.getBounds().pad(0.2));
        });
        
        let markersVisible = true;
        document.getElementById('toggleMarkers').addEventListener('click', function() {
            markersVisible = !markersVisible;
            if (markersVisible) {
                map.addLayer(markers);
                this.innerHTML = '<i class="fas fa-map-pin"></i> Скрыть метки';
            } else {
                map.removeLayer(markers);
                this.innerHTML = '<i class="fas fa-map-pin"></i> Показать метки';
            }
        });
        
        document.getElementById('fullscreenBtn').addEventListener('click', function() {
            const mapContainer = document.querySelector('.map-container');
            if (!document.fullscreenElement) {
                if (mapContainer.requestFullscreen) {
                    mapContainer.requestFullscreen();
                } else if (mapContainer.webkitRequestFullscreen) {
                    mapContainer.webkitRequestFullscreen();
                } else if (mapContainer.msRequestFullscreen) {
                    mapContainer.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        });
        
        // Обработка кликов на элементы списка точек
        document.querySelectorAll('.point-item').forEach(item => {
            item.addEventListener('click', function() {
                const pointId = this.getAttribute('data-point-id');
                const point = keyPoints.find(p => p.id === pointId);
                
                if (point) {
                    map.setView(point.coordinates, 5);
                    
                    // Открываем popup соответствующего маркера
                    markers.eachLayer(function(layer) {
                        if (layer.pointId === pointId) {
                            layer.openPopup();
                        }
                    });
                }
            });
        });
        
        // Добавляем обработчик выхода из полноэкранного режима
        document.addEventListener('fullscreenchange', handleFullscreenChange);
        document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
        document.addEventListener('msfullscreenchange', handleFullscreenChange);
        
        function handleFullscreenChange() {
            const fullscreenBtn = document.getElementById('fullscreenBtn');
            if (document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {
                fullscreenBtn.innerHTML = '<i class="fas fa-compress"></i> Выйти из полного экрана';
            } else {
                fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i> Полный экран';
            }
        }
        
        // Добавляем информацию о текущих координатах при клике на карту
        const coordinatesInfo = L.control({position: 'bottomleft'});
        
        coordinatesInfo.onAdd = function() {
            this._div = L.DomUtil.create('div', 'coordinates-info');
            this.update();
            return this._div;
        };
        
        coordinatesInfo.update = function(coords) {
            if (coords) {
                this._div.innerHTML = `
                    <div style="
                        background: rgba(0, 0, 0, 0.8);
                        color: white;
                        padding: 8px 12px;
                        border-radius: 5px;
                        font-family: monospace;
                        font-size: 14px;
                        border: 1px solid #3949ab;
                    ">
                        X: ${Math.round(coords.lng)}, Z: ${Math.round(coords.lat)}
                    </div>
                `;
            } else {
                this._div.innerHTML = '<div style="background: rgba(0, 0, 0, 0.8); color: white; padding: 8px 12px; border-radius: 5px; font-family: monospace; font-size: 14px;">Кликните на карту</div>';
            }
        };
        
        coordinatesInfo.addTo(map);
        
        map.on('click', function(e) {
            coordinatesInfo.update(e.latlng);
        });
        
        // Информация при загрузке
        setTimeout(() => {
            coordinatesInfo.update({lat: 0, lng: 0});
        }, 1000);
        
        // Инициализация с открытым попапом спавна
        setTimeout(() => {
            markers.eachLayer(function(layer) {
                if (layer.pointId === 'spawn') {
                    layer.openPopup();
                }
            });
        }, 1500);
    </script>
</body>
</html>
